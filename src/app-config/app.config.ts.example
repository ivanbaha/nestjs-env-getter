import { Injectable } from "@nestjs/common";
import { EnvGetterService } from "nestjs-env-getter";

@Injectable()
export class AppConfig {
  // declare your config properties here, for example:

  // readonly port: number;
  // readonly mongoConnectionString: string;
  // readonly optionalConfigBoolean?: boolean;

  constructor(
    protected readonly envGetter: EnvGetterService,
    // You can inject additional providers that were registered in AppConfigModule
    // For example:
    // private readonly databaseService: DatabaseService,
    // private readonly externalApiClient: ExternalApiClient,
  ) {
    // initialize your config properties here, for example:

    // this.port = this.envGetter.getOptionalNumericEnv("PORT", 3000);
    // this.mongoConnectionString = this.envGetter.getRequiredEnv("MONGO_CONNECTION_STRING");
    // this.optionalConfigBoolean = this.envGetter.getOptionalBooleanEnv("OPTIONAL_CONFIG_BOOLEAN");
    // this.testConfig = this.envGetter.getOptionalConfigFromFile(
    //   'configs/test-configs.json',
    //   { testConfigStringFromFile: 'default-value' },
    //   TestConfig,
    // );

    // You can use injected providers to initialize config values:
    // this.dynamicPort = this.databaseService.getRecommendedPort();
    // this.apiEndpoint = this.externalApiClient.getBaseUrl();
  }
}

// example of validation class for getting configs from file
// class TestConfig {
//   testConfigStringFromFile: string;

//   // Used by EnvGetterService to validate the loaded config
//   constructor(data: any) {
//     if (!data.testConfigStringFromFile || typeof data.testConfigStringFromFile !== 'string') {
//       throw new Error('testConfigStringFromFile is required and must be a string');
//     }
//     this.testConfigStringFromFile = data.testConfigStringFromFile;
//   }
// }
